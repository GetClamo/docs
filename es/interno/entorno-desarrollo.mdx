---
title: Entorno de Desarrollo
description: Guía completa para configurar el entorno de desarrollo local de Clamo
---

# Entorno de Desarrollo

Esta guía proporciona instrucciones detalladas para configurar un entorno de desarrollo local completo para Clamo.

## Prerrequisitos

### Software Requerido

| Software | Versión | Propósito |
|----------|---------|-----------|
| Node.js | 20+ | Frontend y servicios TypeScript |
| pnpm | 8+ | Gestor de paquetes |
| Python | 3.11+ | CEJ connector y agentes IA |
| uv | Latest | Gestor de paquetes Python |
| Go | 1.22+ | Worker de ingesta |
| Rust | Latest | clamo-sync y dashboards |
| Docker | Latest | Servicios containerizados |
| Git | Latest | Control de versiones |

### Instalación de Prerrequisitos

<CodeGroup>

```bash macOS
# Homebrew
brew install node pnpm python uv go rust docker git

# Verificar instalaciones
node --version && pnpm --version && python --version
uv --version && go version && rustc --version
```

```bash Ubuntu/Debian
# Node.js via nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20

# pnpm
npm install -g pnpm

# Python y uv
sudo apt install python3.11 python3.11-venv
curl -LsSf https://astral.sh/uv/install.sh | sh

# Go
sudo snap install go --classic

# Rust
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Docker
sudo apt install docker.io docker-compose
```

```powershell Windows
# Usando winget
winget install OpenJS.NodeJS.LTS
winget install pnpm.pnpm
winget install Python.Python.3.11
winget install GoLang.Go
winget install Rustlang.Rust.MSVC
winget install Docker.DockerDesktop

# uv
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

</CodeGroup>

## Clonar Repositorios

### Script de Clonación Completa

```bash
#!/bin/bash
# clone-all.sh

GITHUB_ORG="GetClamo"
BASE_DIR="$HOME/clamo"

mkdir -p $BASE_DIR
cd $BASE_DIR

repos=(
  "clamo-web-app"
  "clamo-tenant"
  "clamo-cases"
  "clamo-database"
  "clamo-commons"
  "clamo-cej-connector"
  "clamo-cej-discovery"
  "clamo-ingest-go"
  "clamo-sync"
  "clamo-mailing"
  "clamo-dashboards"
  "clamo-widget-server"
  "ask-clamo"
  "javi"
  "clamy"
  "clamo-setup"
  "docs"
)

for repo in "${repos[@]}"; do
  if [ ! -d "$repo" ]; then
    echo "Cloning $repo..."
    git clone "git@github.com:$GITHUB_ORG/$repo.git"
  else
    echo "$repo already exists, pulling latest..."
    cd $repo && git pull && cd ..
  fi
done

echo "Done! All repositories cloned to $BASE_DIR"
```

## Variables de Entorno

### Archivo .env Principal

Crea un archivo `.env` en el directorio raíz de Clamo:

```bash
# ===========================================
# BASE DE DATOS
# ===========================================

# Control Database (Supabase)
CONTROL_DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT].supabase.co:5432/postgres

# Neon (para provisioning de tenants)
NEON_API_KEY=neon_api_key_here
NEON_PROJECT_ID=project_id_here

# ===========================================
# AUTENTICACIÓN (WorkOS)
# ===========================================

WORKOS_API_KEY=sk_live_...
WORKOS_CLIENT_ID=client_...
WORKOS_REDIRECT_URI=http://localhost:3001/callback

# ===========================================
# SUPABASE (Vault y Storage)
# ===========================================

SUPABASE_URL=https://[PROJECT].supabase.co
SUPABASE_SERVICE_KEY=eyJ...
SUPABASE_ANON_KEY=eyJ...

# ===========================================
# SERVICIOS EXTERNOS
# ===========================================

# Anthropic (LLM)
ANTHROPIC_API_KEY=sk-ant-...

# SendGrid (Email)
SENDGRID_API_KEY=SG....

# Ably (Real-time)
ABLY_API_KEY=...

# Steel (Browser automation)
STEEL_API_KEY=...

# ===========================================
# KAFKA
# ===========================================

KAFKA_BROKERS=localhost:9092

# ===========================================
# TINYBIRD (Analytics)
# ===========================================

TINYBIRD_TOKEN=...
TINYBIRD_HOST=https://api.tinybird.co

# ===========================================
# CEJ CONNECTOR
# ===========================================

CEJ_REMOTE_URL=https://staging-cej.getclamo.com/api
TEMPORAL_ADDRESS=localhost:7233
TEMPORAL_NAMESPACE=clamo-cej
```

### Variables por Servicio

<AccordionGroup>
  <Accordion title="clamo-web-app">
    ```bash
    NEXT_PUBLIC_API_URL=http://localhost:4000
    NEXT_PUBLIC_TENANT_API_URL=http://localhost:4001
    NEXT_PUBLIC_ABLY_KEY=...
    ```
  </Accordion>
  
  <Accordion title="clamo-tenant">
    ```bash
    PORT=4001
    CONTROL_DATABASE_URL=...
    WORKOS_API_KEY=...
    NEON_API_KEY=...
    ```
  </Accordion>
  
  <Accordion title="clamo-cases">
    ```bash
    PORT=4000
    CONTROL_DATABASE_URL=...
    REDIS_URL=redis://localhost:6379
    ABLY_API_KEY=...
    ```
  </Accordion>
</AccordionGroup>

## Configuración de Base de Datos

### 1. Configurar Supabase (Control DB)

1. Crea un proyecto en [Supabase](https://supabase.com)
2. Obtén la connection string de Settings > Database
3. Habilita Vault en Database > Vault

### 2. Ejecutar Migraciones

```bash
# Usando clamo-setup CLI
cd ~/clamo
clamo db migrate stg

# O manualmente con Prisma
cd clamo-database
npx prisma migrate deploy --schema=prisma/control/schema.prisma
```

### 3. Seed de Datos (Opcional)

```bash
cd clamo-database
npx prisma db seed
```

## Clamo Setup CLI

### Instalación

```bash
cd ~/clamo/clamo-setup
uv tool install . --force
```

### Configuración Inicial

```bash
cd ~/clamo
clamo dev setup
```

El wizard te preguntará:
1. Qué servicios quieres ejecutar
2. Si usar clamo-commons local o remoto
3. Configuración del CEJ connector

### Comandos Útiles

```bash
# Iniciar todos los servicios
clamo dev start

# Iniciar con rebuild de Docker
clamo dev start --rebuild

# Detener servicios
clamo dev stop

# Ver estado
clamo dev status

# Cambiar a commons local
clamo commons use-local

# Volver a commons remoto
clamo commons use-remote
```

## Configuración de IDE

### VS Code

Extensiones recomendadas:

```json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "prisma.prisma",
    "bradlc.vscode-tailwindcss",
    "ms-python.python",
    "golang.go",
    "rust-lang.rust-analyzer",
    "ms-azuretools.vscode-docker"
  ]
}
```

Settings recomendados:

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[python]": {
    "editor.defaultFormatter": "ms-python.black-formatter"
  },
  "[rust]": {
    "editor.defaultFormatter": "rust-lang.rust-analyzer"
  },
  "typescript.preferences.importModuleSpecifier": "relative"
}
```

## Verificación del Entorno

### Checklist de Verificación

```bash
#!/bin/bash
# verify-setup.sh

echo "=== Verificando entorno de desarrollo ==="

# Node.js
echo -n "Node.js: "
node --version || echo "NOT INSTALLED"

# pnpm
echo -n "pnpm: "
pnpm --version || echo "NOT INSTALLED"

# Python
echo -n "Python: "
python --version || echo "NOT INSTALLED"

# uv
echo -n "uv: "
uv --version || echo "NOT INSTALLED"

# Go
echo -n "Go: "
go version || echo "NOT INSTALLED"

# Rust
echo -n "Rust: "
rustc --version || echo "NOT INSTALLED"

# Docker
echo -n "Docker: "
docker --version || echo "NOT INSTALLED"

# Clamo CLI
echo -n "Clamo CLI: "
clamo --version || echo "NOT INSTALLED"

echo "=== Verificación completa ==="
```

## Próximos Pasos

<CardGroup cols={2}>
  <Card
    title="Depuración"
    icon="bug"
    href="/es/interno/depuracion"
  >
    Guía de depuración y troubleshooting.
  </Card>
  <Card
    title="Despliegue"
    icon="rocket"
    href="/es/interno/despliegue"
  >
    Procedimientos de deployment.
  </Card>
</CardGroup>

