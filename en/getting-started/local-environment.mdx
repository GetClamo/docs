---
title: Local Environment
description: Configure your local development environment with clamo-setup CLI
---

# Local Environment Setup

This guide explains how to configure the Clamo local development environment using the `clamo-setup` CLI.

## Prerequisites

### Required Software

| Software | Version | Purpose |
|----------|---------|---------|
| Node.js | 20+ | Frontend and TypeScript services |
| pnpm | 10+ | Package manager |
| Python | 3.11+ | CEJ connector and AI agents |
| uv | Latest | Python package manager |
| Go | 1.22+ | Ingestion worker (optional) |
| Rust | Latest | clamo-sync and dashboards (optional) |
| Docker | Latest | Containerized services |
| Git | Latest | Version control |

### Install uv

<CodeGroup>

```bash Linux/macOS
curl -LsSf https://astral.sh/uv/install.sh | sh
```

```powershell Windows
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

```bash Homebrew
brew install uv
```

</CodeGroup>

Verify the installation:

```bash
uv --version
uvx --version
```

## CLI Installation

### Option 1: Global Installation (Recommended)

```bash
# Navigate to the clamo-setup directory
cd /path/to/clamo/clamo-setup

# Install globally
uv tool install . --force
```

Restart your terminal and verify:

```bash
clamo --help
```

### Option 2: Development Installation

```bash
cd clamo-setup
uv sync
source .venv/bin/activate

# Navigate to the clamo root directory
cd /path/to/clamo
clamo --help
```

## Initial Setup

Run the interactive setup from the Clamo root directory:

```bash
cd /path/to/clamo
clamo dev setup
```

The wizard will ask you:

1. **Services to run**: Select which services you need
2. **clamo-commons source**: Local (development) or published (GitHub registry)
3. **CEJ connector configuration**: URLs and credentials

The configuration is saved in `clamo.dev.config.json`.

## Available Services

| Service | Description | Type |
|---------|-------------|------|
| `clamo-web` | Next.js Frontend (port 3001) | Local |
| `clamo-cases` | Cases API (port 4000) | Local |
| `clamo-tenant` | Tenants API (port 4001) | Local |
| `clamo-dashboards` | Dashboards API (Rust) | Local |
| `clamo-widget-server` | Widget Server | Local |
| `luna` | Unified AI Assistant (Javi, Clamy, Luna) | Local |
| `clamo-tools` | Olive Tool Server | Local |
| `clamo-cej-connector` | CEJ Connector | Docker |
| `clamo-cej-discovery` | Discovery Workers | Docker |
| `clamo-ingest-go` | Ingestion Worker | Docker |

<Note>
**Note on AI Assistants:** `javi` and `clamy` are no longer separate services. They are now **profiles** (tool profiles) within the unified `luna` service (deployed as `ask-clamo`).
</Note>

## Main Commands

### Development

```bash
# Interactive setup
clamo dev setup

# Start services
clamo dev start

# Start and rebuild Docker containers
clamo dev start --rebuild

# Stop Docker services
clamo dev stop

# Restart all services
clamo dev restart
```

### Commons Management

```bash
# Use local clamo-commons (development)
clamo commons use-local

# Use published clamo-commons
clamo commons use-remote

# View current status
clamo commons status

# Validate no local dependencies (for CI)
clamo commons enforce-remote
```

### Database

```bash
# Run migrations on staging
clamo db migrate stg

# Run migrations on production
clamo db migrate prd

# View migration status
clamo db status stg

# Open Prisma Studio
clamo db studio stg
```

### CLI

```bash
# Update the CLI
clamo update

# Uninstall
clamo uninstall
```

## Typical Workflow

### Daily Development

```bash
# Initial setup (only once)
clamo dev setup

# Start services
clamo dev start

# ... work on your code ...

# Ctrl+C to stop

# If you need to restart
clamo dev restart
```

### Working on clamo-commons

```bash
# Switch to local commons
clamo commons use-local

# Make changes to clamo-commons
cd clamo-commons
# ... edit code ...
pnpm build

# Before committing, switch back to remote
clamo commons use-remote
```

## Hot Reload

All services have hot reload enabled:

| Service | Hot Reload |
|---------|------------|
| clamo-web (Next.js) | Automatic |
| clamo-cases | Via `pnpm dev` |
| clamo-tenant | Via `pnpm dev` |
| luna (LangGraph) | Via `langgraph dev` |
| clamo-tools (Olive) | Via `uvicorn --reload` |
| clamo-cej-connector (Docker) | Via volume mounting |

<Warning>
Changes to `clamo-commons` require manual rebuild:
```bash
cd clamo-commons && pnpm build
```
</Warning>

## When to Rebuild Containers

**You need `--rebuild` when:**
- Dependencies change (`pyproject.toml`, `uv.lock`)
- Dockerfile changes
- Base image is updated

```bash
clamo dev restart --rebuild
```

**You DON'T need rebuild for:**
- Python code changes (hot reload)
- `.env` changes
- Runtime changes

## Environment Variables

Create a `.env` file in the root directory:

```bash
# Database
CONTROL_DATABASE_URL=postgresql://...

# WorkOS
WORKOS_API_KEY=sk_...
WORKOS_CLIENT_ID=client_...
WORKOS_REDIRECT_URI=http://localhost:3001/callback

# Neon
NEON_API_KEY=...

# CEJ (optional)
CEJ_REMOTE_URL=https://staging-cej.getclamo.com/api
```

## Troubleshooting

<AccordionGroup>
  <Accordion title="Error: clamo command not found">
    Make sure you've restarted your terminal after installing the CLI.
    If you used development installation, activate the virtualenv:
    ```bash
    source .venv/bin/activate
    ```
  </Accordion>
  
  <Accordion title="Docker containers won't start">
    Verify Docker is running:
    ```bash
    docker ps
    ```
    If there are orphan containers:
    ```bash
    clamo dev stop
    docker system prune
    clamo dev start --rebuild
    ```
  </Accordion>
  
  <Accordion title="Database connection error">
    Verify the URLs in `.env` are correct and that you have network access to Neon/Supabase.
  </Accordion>
  
  <Accordion title="Port already in use">
    Check which process is using the port:
    ```bash
    lsof -i :3001  # For web app
    lsof -i :4000  # For clamo-cases
    lsof -i :4001  # For clamo-tenant
    ```
    Kill the process or change the port in your configuration.
  </Accordion>
</AccordionGroup>

## IDE Configuration

### VS Code

Recommended extensions:

```json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "prisma.prisma",
    "bradlc.vscode-tailwindcss",
    "ms-python.python",
    "golang.go",
    "rust-lang.rust-analyzer"
  ]
}
```

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Debugging"
    icon="bug"
    href="/en/guides/debugging"
  >
    Debugging and troubleshooting guide.
  </Card>
  <Card
    title="Services"
    icon="server"
    href="/en/services/catalog"
  >
    Detailed documentation of each service.
  </Card>
</CardGroup>
